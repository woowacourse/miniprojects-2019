<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
	<th:block th:replace="fragments/commonHeader"></th:block>
</head>
<body>
<div>
	<div class="page-container mrg-top-80">
		<div class="main-content">
			<div class="container-fluid max-width-lg mx-auto">
				<div class="row">
					<div class="col-lg-10 mx-auto float-left clear-none">
						<div id="zzazanstagram" class="pdd-right-35 mrg-top-30 inline-block">
							<div id="main-carousel-slide" class="carousel slide inline-block" data-ride="carousel"
							     data-interval="3000">
								<div class="carousel-inner">
									<div class="carousel-item active">
										<img src="/images/default/zzazanstagram_main1.jpg" class="d-block w-100" alt="">
									</div>
									<div class="carousel-item">
										<img src="/images/default/zzazanstagram_main2.jpg" class="d-block w-100" alt="">
									</div>
									<div class="carousel-item">
										<img src="/images/default/zzazanstagram_main3.jpg" class="d-block w-100" alt="">
									</div>
									<div class="carousel-item">
										<img src="/images/default/zzazanstagram_main4.jpg" class="d-block w-100" alt="">
									</div>
								</div>
							</div>
						</div>
						
						<div id="login-card" class="card inline-block absolute mrg-top-100">
							<div class="card-title mrg-top-30">
								<img class="logo desktop-view mrg-top-5 mrg-left-85"
								     src="/images/logo/zzazanstagram.png">
							</div>
							<div class="card-body pdd-top-0">
								<form id="login-form" action="/login" method="post" class="form-horizontal mrg-top-40">
									<div class="form-group row">
										<div class="col-md-12">
											<input id="login-form-email" type="email" name="email" class="form-control"
											       placeholder="이메일" required>
										</div>
									</div>
									<div class="form-group row">
										<div class="col-md-12">
											<input id="login-form-password" type="password" name="password"
											       class="form-control"
											       placeholder="비밀번호" required>
										</div>
									</div>
									<button id="login-card-submit-btn" type="submit"
									        class="btn-inverse btn-primary btn-sm">로그인
									</button>
								</form>
							</div>
						</div>
						
						<div id="login-to-signup-card" class="card inline-block absolute">
							<div class="card-body pdd-left-90">
								<form action="/signup" method="get">
									<text class="card-title">계정이 없으신가요?</text>
									<button type="submit" class="btn-inverse btn-primary btn-xs mrg-left-5">회원 가입
									</button>
								</form>
							</div>
						</div>
					
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<th:block th:replace="fragments/cdnScript"></th:block>
<script>
    const loginBtn = document.getElementById("login-card-submit-btn");

    loginBtn.addEventListener('click', function () {
        const email = document.getElementById("login-form-email").value;
        const password = document.getElementById("login-form-password").value;
        const formData = new FormData();
        formData.append('email', email);
        formData.append('password', password);

        axios({
            method: 'post',
            url: '/login',
            data: formData,
        }).then(() => {
        }).catch((error) => {
            const errRes = error.response;
            if (error.response.status === 400) {
                alert(errRes.data.msg);
            }
            window.location = "/login";
        });
    });
</script>
</body>
</html>